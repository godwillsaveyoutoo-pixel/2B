  :root{
    --bg0:#f8fafc;
    --ink:#0b1220;
    --mut:#6b7280;
    --line:#e5e7eb;
    --card:#ffffff;
    --accent:#2563eb;
    --good:#16a34a;
    --bad:#dc2626;
    --warn:#d97706;

    --r:18px;
    --r2:24px;
    --shadow: 0 14px 40px rgba(2,6,23,.10);

    --pad: clamp(14px, 2.2vw, 22px);
    --hbtn: 46px;
    --hinput: 52px;
    --maxw: 1180px;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
  font-family: "Baloo 2", system-ui, Arial, sans-serif;
      color:var(--ink);
    background:
      radial-gradient(1200px 680px at 85% -10%, #eaf1ff 0%, var(--bg0) 60%, #fbfdff 100%);

    /* Op kleinere schermen (of als leerlingen inzoomen) moet je kunnen scrollen. */
    overflow-x:hidden;
    overflow-y:auto;
  }

  .visualWrap img{width:100%; height:auto; max-height: clamp(320px, 52vh, 560px); display:block}
/* Game: gebruik de beschikbare hoogte voor de visual.
   Dit haalt de grote witte  weg tussen visual en antwoord. */
.panel.withVisual .visualWrap{
  height: 100%;
  max-height: none; /* laat de grid-rij bepalen */
}
.panel.withVisual .visualWrap svg{
  height: 100%;
  max-height: none;
}
.panel.withVisual .visualWrap img{
  width: 100%;
  height: 100%;
  max-height: none;
  object-fit: contain;
}

  .app{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:stretch;
    padding: var(--pad);
  }

  .shell{
    width:min(var(--maxw), 100%);
    height:100%;
    display:grid;
    grid-template-rows: auto 1fr;
    gap: 12px;
  }

  /* Top bar */
  .top{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap: 10px;
    padding: 10px 12px;
    background: rgba(255,255,255,.75);
    border:1px solid var(--line);
    border-radius: 999px;
    backdrop-filter: blur(6px);
  }
  .brand{
    display:flex; align-items:center; gap:10px;
    font-weight:900;
    letter-spacing:.2px;
    user-select:none;
    min-width: 0;
  }
  .dot{
    width:12px; height:12px; border-radius:999px; background: var(--accent);
    box-shadow: 0 0 0 6px rgba(37,99,235,.12);
    flex:0 0 auto;
  }
  .brandTitle{white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .pill{
    height:36px;
    display:inline-flex; align-items:center; gap:8px;
    padding: 0 12px;
    border-radius:999px;
    border:1px solid var(--line);
    background: rgba(255,255,255,.85);
    font-weight:900;
    color:#111827;
    user-select:none;
    white-space:nowrap;
  }
  .pill.muted{color:var(--mut); font-weight:800}
  .iconBtn{
    height:36px; width:44px;
    border-radius:999px;
    border:1px solid var(--line);
    background: rgba(255,255,255,.85);
    cursor:pointer;
    font-weight:900;
  }
  .iconBtn:active{transform:translateY(1px)}
  .hidden{display:none !important}

  .stage{
    min-height:0;
    border:1px solid var(--line);
    border-radius: var(--r2);
    background: rgba(255,255,255,.86);
    box-shadow: var(--shadow);
    overflow:hidden;
  }
.ratioWrap{
  width:100%;
  display:flex;
  justify-content:center;
}

.ratioTable{
  border-collapse:separate;
  border-spacing:0;
  border:1px solid var(--line);
  border-radius:16px;
  overflow:hidden;
  background:#fff;
  min-width:260px;
}

.ratioTable th{
  background:#f8fafc;
  font-weight:900;
  padding:10px;
  border-bottom:1px solid var(--line);
  text-align:center;
}

.ratioCell{
  padding:10px;
  border-bottom:1px solid var(--line);
  text-align:center;
  font-weight:900;
}

.ratioTable tr:last-child .ratioCell{
  border-bottom:none;
}

.ratioInput{
  width:100%;
  height:40px;
  border-radius:12px;
  border:1px solid var(--line);
  text-align:center;
  font-weight:900;
  font-size:16px;
}

  /* elke screen kan intern scrollen (handig bij kleinere resoluties / browser-zoom) */
  .screen{height:100%; min-height:0; display:none; overflow:auto; overscroll-behavior:contain}
  .screen.active{display:block}

  .center{
    height:100%;
    display:grid;
    place-items:center;
    padding: var(--pad);
  }
  .card{
    width:min(740px, 100%);
    background: var(--card);
    border:1px solid var(--line);
    border-radius: var(--r2);
    box-shadow: 0 10px 28px rgba(2,6,23,.08);
    padding: clamp(16px, 2.4vw, 28px);
  }
  h1,h2,h3{margin:0 0 10px}
  h1{font-size: clamp(20px, 3vw, 30px)}
  h2{font-size: clamp(18px, 2.2vw, 24px)}
  p{margin:0 0 14px; color:var(--mut); font-weight:800; line-height:1.35}

  .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  .grow{flex:1}
  .input{
    height: var(--hinput);
    width:100%;
    border-radius: 14px;
    border:1px solid var(--line);
    padding: 0 14px;
  font: 800 16px "Baloo 2", system-ui, Arial;
      outline:none;
    background:#fff;
  }
  .btn{
    height: var(--hbtn);
    border-radius: 14px;
    border:1px solid var(--line);
    background:#fff;
    cursor:pointer;
    padding: 0 14px;
    font-weight:900;
    font-size: 15px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:8px;
    user-select:none;
  }
  .btn.primary{
    background: var(--accent);
    border-color: rgba(37,99,235,.35);
    color:#fff;
  }
  .btn:disabled{
    opacity:.45; cursor:not-allowed;
  }

  /* Topic map */
  .map{
    height:100%;
    padding: var(--pad);
    display:grid;
    grid-template-rows: auto 1fr;
    gap: 14px;
  }
  .mapHeader{
    display:flex; align-items:flex-end; justify-content:space-between; gap:12px;
    padding: 6px 2px 2px;
  }
  .mapTitle{
    font-weight:900;
    font-size: clamp(18px, 2.2vw, 24px);
  }
  .mapGrid{
    min-height:0;
    display:grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 12px;
  }
  @media (max-width:1100px){ .mapGrid{grid-template-columns: repeat(4, 1fr);} }
  @media (max-width:860px){ .mapGrid{grid-template-columns: repeat(3, 1fr);} }
  @media (max-width:620px){ .mapGrid{grid-template-columns: repeat(2, 1fr);} }

  .tile{
    border:1px solid var(--line);
    border-radius: 22px;
    background:#fff;
    box-shadow: 0 10px 24px rgba(2,6,23,.06);
    overflow:hidden;
    cursor:pointer;
    position:relative;
    min-height: 170px;
    display:grid;
    grid-template-rows: 1fr auto;
  }
  .tile:active{transform:translateY(1px)}
  .tileTop{
    display:grid;
    place-items:center;
    padding: 10px 10px 0;
  }
  .tileTop svg{width:100%; height: 120px; max-height: 140px}
  .tileTitle{
    padding: 10px 12px 12px;
    font-weight: 900;
    text-align:center;
    letter-spacing:.2px;
  }


  /* Medaille op de topickaart (map) */
  .tile.medal-gold{
    background: linear-gradient(180deg, rgba(250,204,21,.14), #ffffff 60%);
    border-color: rgba(250,204,21,.35);
  }
  .tile.medal-silver{
    background: linear-gradient(180deg, rgba(148,163,184,.16), #ffffff 60%);
    border-color: rgba(148,163,184,.35);
  }
  .tile.medal-bronze{
    background: linear-gradient(180deg, rgba(249,115,22,.12), #ffffff 60%);
    border-color: rgba(249,115,22,.33);
  }
  .cornerMedal{
    position:absolute;
    top:10px; right:10px;
    width:36px; height:36px;
    border-radius:999px;
    display:grid;
    place-items:center;
    background: rgba(255,255,255,.92);
    border: 1px solid var(--line);
    box-shadow: 0 10px 24px rgba(2,6,23,.10);
    font-size:20px;
    pointer-events:none;
  }
  .cornerMedal.gold{ border-color: rgba(250,204,21,.55); }
  .cornerMedal.silver{ border-color: rgba(148,163,184,.55); }
  .cornerMedal.bronze{ border-color: rgba(249,115,22,.45); }
  .badgeRow{
    position:absolute;
    top:10px; left:10px;
    display:flex; gap:8px;
    pointer-events:none;
  }
  .medal, .cup{
    height:28px;
    padding:0 10px;
    border-radius: 999px;
    border:1px solid var(--line);
    background: rgba(255,255,255,.9);
    font-weight: 900;
    display:inline-flex; align-items:center; gap:6px;
  }
.medal::before{
  content: "ðŸ¥‰";
  font-size: 20px;
  margin-right: 6px;
}

.medal.silver::before{ content:"ðŸ¥ˆ"; }
.medal.gold::before{ content:"ðŸ¥‡"; }

.cup::before{
  content:"ðŸ†";
  font-size: 22px;
  margin-right: 6px;
}

  .tiny{color:var(--mut); font-weight:800; font-size: 14px; line-height:1.35}

  /* Topic modal */
  .modalBack{
    position:fixed; inset:0;
    background: rgba(2,6,23,.55);
    display:none;
    place-items:center;
    z-index:60;
    padding: var(--pad);
  }
  .modalBack.open{display:grid}
  .modal{
    width:min(720px, 100%);
    background:#fff;
    border:1px solid var(--line);
    border-radius: var(--r2);
    box-shadow: var(--shadow);
    overflow:hidden;
  }
  .modalHead{
    padding: 14px 16px;
    border-bottom:1px solid var(--line);
    display:flex; align-items:center; justify-content:space-between; gap:10px;
  }
  .modalBody{
    padding: 16px;
    display:grid;
    gap: 12px;
  }
  .modeGrid{
    display:grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }
  @media (max-width:700px){ .modeGrid{grid-template-columns:1fr} }
  .modeCard{
    border:1px solid var(--line);
    border-radius: 18px;
    background:#fff;
    padding: 14px;
    display:grid;
    gap: 10px;
  }
  .modeCard h3{margin:0; font-size:16px}
  .modeCard .tiny{margin:0}
  .xBtn{
    height:36px; width:44px;
    border-radius:999px;
    border:1px solid var(--line);
    background:#fff;
    cursor:pointer;
    font-weight:900;
  }

  /* Game screen */
  .game{
    height:100%;
    min-height:0;
    padding: var(--pad);
    display:grid;
    grid-template-columns: 1fr 360px;
    gap: 14px;
  }
  .game.oneCol{grid-template-columns:1fr}
  @media (max-width:980px){
    .game{grid-template-columns:1fr; grid-template-rows:auto auto}
  }

  .panel{
    border:1px solid var(--line);
    border-radius: var(--r2);
    background:#fff;
    box-shadow: 0 10px 24px rgba(2,6,23,.06);
    transition: box-shadow .25s ease, border-color .25s ease;
    min-height:0;
    overflow:hidden;
    display:grid;
    grid-template-rows: auto 1fr auto;
  }

  /* Korte feedbackkleur (zoals in 1B) */
  .panel.flashOk{
    border-color: rgba(22,163,74,.35);
    box-shadow: 0 0 0 3px rgba(22,163,74,.22), 0 10px 24px rgba(2,6,23,.06);
  }
  .panel.flashErr{
    border-color: rgba(220,38,38,.32);
    box-shadow: 0 0 0 3px rgba(220,38,38,.20), 0 10px 24px rgba(2,6,23,.06);
  }
  .panelHead{
    padding: 12px 14px;
    border-bottom:1px solid var(--line);
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    background: #ffffff;
  }
  .headLeft{
    display:flex; flex-direction:column; gap:4px; min-width:0;
  }
  .crumb{
    color:var(--mut);
    font-weight:900;
    font-size: 12px;
    letter-spacing:.16px;
    text-transform: uppercase;
    white-space:nowrap;
    overflow:hidden; text-overflow:ellipsis;
  }
  .headTitle{
    font-weight: 900;
    font-size: 16px;
    white-space:nowrap;
    overflow:hidden; text-overflow:ellipsis;
  }
  .headQ{
    margin-top:2px;
    font-weight:900;
    font-size: clamp(13px, 1.35vw, 16px);
    line-height:1.25;
    color: var(--ink);
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
    max-width: 620px;
  }
  .headRight{
    display:flex; align-items:center; gap:8px;
  }
  .miniPill{
    height:32px;
    padding: 0 10px;
    border-radius:999px;
    border:1px solid var(--line);
    background:#fff;
    font-weight:900;
    color:#111827;
    white-space:nowrap;
  }
  .miniBtn{
    height:32px;
    border-radius:999px;
    border:1px solid var(--line);
    background:#fff;
    cursor:pointer;
    font-weight:900;
    padding:0 12px;
  }

  .panelBody{
    min-height:0;
    padding: 16px 16px;
    display:grid;
    align-content:center;
    justify-items:center;
    gap: 14px;
  }

  /*
    Compact laptop mode: als er een visual is,
    geven we die de hoofdrol (meer hoogte),
    en verhuizen we de vraag naar de header.
  */
  .panel.withVisual .panelBody{
    align-content:stretch;
    justify-items:stretch;
    grid-template-rows: 1fr auto;
    gap: 12px;
    padding: 12px 14px;
    min-height: 0;
  }
  /* vraag verbergen in body enkel wanneer die in de panelhead staat */
  .panel.withVisual.promptInHead .panelBody .promptBig,
  .panel.withVisual.promptInHead .panelBody .promptSub{ display:none; }

  .panel.withVisual .visualWrap{
    height:100%;
    max-height:100%;
    padding: 12px;
  }
  .panel.withVisual .visualWrap svg{ max-height:100%; }

  /* Vierhoeken: geen scroll, altijd gecentreerd (geen "scroll-balk" in de visual) */
  .panel.withVisual .visualWrap.noScroll{
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .panel.withVisual .visualWrap.noScroll > div{
    width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .panel.withVisual .visualWrap.noScroll svg{
    width:auto;
    height:100%;
    max-height:100%;
    max-width:100%;
  }
  .promptBig{
    width:100%;
    text-align:center;
    font-weight:900;
    font-size: clamp(18px, 2.4vw, 26px);
    line-height:1.25;
    white-space:pre-line;
  }
  .promptSub{
    width:100%;
    text-align:center;
    color: var(--mut);
    font-weight:800;
    line-height:1.35;
  }

  .visualWrap{
    width:100%;
    display:grid;
    place-items:center;
    border:1px solid var(--line);
    border-radius: 18px;
    background: #f7fafc;
    /* niet meer 'afkappen' bij grotere SVG's; zo kan je ook scrollen als nodig */
    overflow:auto;
    padding: 10px;
    max-height: clamp(360px, 56vh, 680px);
  }
  .visualWrap svg{width:100%; height:auto; max-height: clamp(320px, 52vh, 560px); display:block}
  .visualWrap svg.geoScene{max-height: clamp(420px, 62vh, 720px);}

  /* =========================
     TEKENMODUS (vierhoek)
  ========================= */
  .drawWrap{ width:100%; display:grid; gap:10px; }
  .drawBar{
    width:100%;
    display:grid;
    gap:8px;
    padding:10px 12px;
    border:1px solid var(--line);
    border-radius:16px;
    background:#fff;
  }
  .drawTitle{ font-weight:1000; color:var(--ink); }
  .drawBtns{ display:flex; flex-wrap:wrap; gap:8px; }
  .drawBtn{
    border:2px solid var(--line);
    background:var(--card);
    border-radius:14px;
    padding:8px 10px;
    font-weight:900;
    cursor:pointer;
  }
  .drawBtn.on{
    border-color:#2563eb;
    background:rgba(37,99,235,.10);
  }
  .drawHint{ font-size:12px; color:var(--mut); font-weight:800; line-height:1.25; }
  .drawSvg{
    width:100%;
    height:auto;
    border:1px solid var(--line);
    border-radius:18px;
    background:#fff;
    box-shadow: 0 12px 30px rgba(2,6,23,.06);
  }

  .answer{
    border-top:1px solid var(--line);
    padding: 12px 14px;
    display:grid;
    gap: 10px;
  }

  .choices{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    justify-content:center;
  }
  .choice{
    flex: 1 1 170px;
    height: 46px;
    border-radius: 14px;
    border:1px solid var(--line);
    background:#fff;
    cursor:pointer;
    font-weight:900;
    display:flex;
    align-items:center;
    justify-content:center;
    padding: 0 10px;
    user-select:none;
    text-align:center;
    min-width: 160px;
  }
  .choice.sel{
    border-color: rgba(37,99,235,.55);
    box-shadow: 0 0 0 4px rgba(37,99,235,.12);
  }

  .aRow{
    display:flex;
    gap:10px;
    align-items:center;
    justify-content:center;
    flex-wrap:wrap;
  }
  .aRow.clickOnly{
    gap:12px;
  }
  .aRow.clickOnly .okInline{
    min-width: 140px;
  }
  .okInline{
    height: var(--hinput);
    border-radius: 14px;
    padding: 0 14px;
  }
  .unitChip{
    height: var(--hinput);
    border-radius: 14px;
    border:1px solid var(--line);
    background:#fff;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding: 0 14px;
    font-weight:900;
    min-width: 76px;
  }

  /* Dropdown voor eenheden (cm vs cmÂ², m vs mÂ², ...)
     We houden dezelfde "chip"-look, maar met een select. */
  .unitSel{
    height: var(--hinput);
    border-radius: 14px;
    border:1px solid var(--line);
    background:#fff;
    padding: 0 14px;
    font-weight:900;
    min-width: 92px;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
    line-height: 1;
  }
  .unitSel:disabled{
    opacity: .75;
    cursor: default;
  }
  /* klein pijltje (pure CSS) */
  .unitSel{
    background-image:
      linear-gradient(45deg, transparent 50%, #0f172a 50%),
      linear-gradient(135deg, #0f172a 50%, transparent 50%);
    background-position:
      calc(100% - 18px) 50%,
      calc(100% - 12px) 50%;
    background-size: 6px 6px, 6px 6px;
    background-repeat: no-repeat;
    padding-right: 34px;
  }
  
  .status{
    text-align:center;
    font-weight:500;
    min-height: 2px;
  }
  .ok{color:var(--good)}
  .err{color:var(--bad)}
  .warn{color:var(--warn)}

  /* Right panel keypad */
  .rightPanel{
    border:1px solid var(--line);
    border-radius: var(--r2);
    background:#fff;
    box-shadow: 0 10px 24px rgba(2,6,23,.06);
    overflow:hidden;
    display:grid;
    grid-template-rows: auto 1fr;
  }
  .rpHead{
    padding: 12px 14px;
    border-bottom:1px solid var(--line);
    font-weight:900;
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .keypad{
    padding: 14px;
    display:grid;
    grid-template-columns: repeat(4, 1fr);
    gap:10px;
    align-content:start;
  }
  .key{
    height: 54px;
    border-radius: 16px;
    border:1px solid var(--line);
    background:#fff;
    cursor:pointer;
    font-weight:900;
    font-size: 18px;
    user-select:none;
  }
  .key.wide{grid-column: 1 / -1}
  .key.ok{
    background: rgba(22,163,74,.10);
    border-color: rgba(22,163,74,.30);
  }

  /* Drawer */
  .drawerBackdrop{
    position:fixed; inset:0;
    background: rgba(2,6,23,.55);
    display:none;
    align-items:stretch;
    justify-content:flex-end;
    z-index:70;
  }
  .drawerBackdrop.open{display:flex}
  .drawer{
    width:min(380px, 88vw);
    background:#fff;
    border-left:1px solid var(--line);
    padding: 14px;
    display:grid;
    grid-template-rows:auto 1fr auto;
    gap: 10px;
  }
  .drawer h3{margin:0; font-size:18px}
  .drawer .item{
    height:44px;
    border-radius:14px;
    border:1px solid var(--line);
    background:#fff;
    cursor:pointer;
    font-weight:900;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding: 0 12px;
    margin-bottom: 10px;
  }

  /* Leaderboard */
  .board{
    height:100%;
    padding: var(--pad);
    display:grid;
    grid-template-rows:auto 1fr;
    gap: 12px;
  }
  .boardTop{
    display:flex;
    gap:10px;
    align-items:center;
    flex-wrap:wrap;
    justify-content:space-between;
  }
  table{width:100%; border-collapse:separate; border-spacing:0}
  th,td{padding:10px 8px; border-bottom:1px solid var(--line); text-align:left; font-weight:900}
  th{color:var(--mut); font-weight:900; position:sticky; top:0; background:#fff}
  .tableWrap{
    overflow:auto;
    border:1px solid var(--line);
    border-radius: 16px;
    background:#fff;
    max-height: calc(100vh - 240px);
  }

  /* Test setup */
  .seg{
    display:flex; gap:8px; flex-wrap:wrap;
    border:1px solid var(--line);
    border-radius: 16px;
    padding: 10px;
    background:#fff;
  }
  .segBtn{
    height: 40px;
    border-radius: 999px;
    border: 1px solid var(--line);
    background:#fff;
    cursor:pointer;
    font-weight:900;
    padding: 0 12px;
  }
  [hidden]{display:none!important;}

  .segBtn.on{
    border-color: rgba(37,99,235,.55);
    box-shadow: 0 0 0 4px rgba(37,99,235,.12);
  }
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.overlay.hidden {
  display: none;
}

.helpCard {
  background: white;
  border-radius: 16px;
  padding: 16px;
  width: min(90vw, 640px);
  max-height: 85vh;
  overflow: auto;
  box-shadow: 0 20px 40px rgba(0,0,0,.25);
}

.helpHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 700;
  margin-bottom: 12px;
}

/* =====================================
   FRACTIONS â€“ stabiel, niet-overlappend
   Gebruikt grid i.p.v. absolute positioning
===================================== */

.fraction-wrap {
  display: flex;
  flex-wrap: nowrap; 
  align-items: center;
  justify-content: center;
  overflow-x: auto;
  gap: 28px;
  padding: 20px;
}

/* ========== Ã©Ã©n breuk ========== */
.fraction {
  display: grid;
  grid-template-rows: 52px 6px 52px;
  align-items: center;
  justify-items: center;
  width: 160px;
}

/* teller & noemer (tekst of input) */
.fraction .num,
.fraction .den,
.fraction input {
  width: 100%;
  height: 52px;
  border-radius: 14px;
  font-size: 24px;
  font-weight: 900;
  text-align: center;
  box-sizing: border-box;
}

/* vaste waarden */
.fraction .num,
.fraction .den {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f8fafc;
  border: 2px solid #1f2937;
  color: #0b1220;
}

/* invulvelden */
.fraction input {
  border: 2px solid #1f2937;
  background: #ffffff;
  outline: none;
}

.fraction input:focus {
  border-color: #2563eb;
  background: #eef3ff;
  box-shadow: 0 0 0 3px rgba(37,99,235,.25);
}

/* breukstreep */
.fraction .bar {
  width: 100%;
  height: 6px;
  border-radius: 999px;
  background: #1f2937;
}

/* ========== symbool ========== */
.fraction-symbol {
  font-size: 34px;
  font-weight: 900;
  padding: 0 6px;
  user-select: none;
  align-self: center;
  line-height: 1;
}

/* ========== responsive ========== */
@media (max-width: 520px) {
  .fraction {
    width: 130px;
    grid-template-rows: 44px 5px 44px;
  }

  .fraction .num,
  .fraction .den,
  .fraction input {
    height: 44px;
    font-size: 20px;
  }

  .fraction-symbol {
    font-size: 28px;
  }
}
/* =========================
   PERCENT CLICK GRID
========================= */

.percent-grid-wrap{
  display:grid;
  gap:12px;
  justify-items:center;
}

.percent-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(56px, 1fr));
  gap:10px;
  max-width:360px;
}

.percent-cell{
  width:56px;
  height:56px;
  border-radius:12px;
  border:2px solid #1f2937;
  background:#ffffff;
  cursor:pointer;
  transition: all .15s ease;
}

.percent-cell.active{
  background:#2563eb;
  border-color:#2563eb;
  box-shadow: inset 0 0 0 3px rgba(255,255,255,.6);
}

.percent-cell:active{
  transform: scale(0.96);
}

.percent-hint{
  font-weight:900;
  color:#374151;
}
/* =========================
   FRACTION GRID (klikvakjes)
========================= */

.fraction-grid-wrap {
  display: grid;
  gap: 12px;
  justify-items: center;
  width: 100%;
}

.fraction-grid-label {
  font-weight: 900;
  font-size: 18px;
}

.fraction-grid {
  display: grid;
  gap: 8px;
  width: min(420px, 100%);
}

.fraction-cell {
  aspect-ratio: 1 / 1;
  border-radius: 10px;
  border: 2px solid #1f2937;
  background: #ffffff;
  cursor: pointer;
  transition: background 0.15s, transform 0.05s;
}

.fraction-cell.on {
  background: #2563eb;
}

.fraction-cell:active {
  transform: scale(0.96);
}
.visualWrap svg text {
  font-family: "Baloo 2", system-ui, sans-serif;
}
.shop-discount{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:24px;
  padding:20px;
}

.shop-item{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
}

.shop-item img{
  width:90px;
  height:auto;
}

.shop-item .label{
  font-weight:900;
  font-size:14px;
}

.shop-arrow{
  font-size:32px;
  font-weight:900;
}

.shop-info{
  display:flex;
  flex-direction:column;
  gap:8px;
  font-weight:900;
}

.shop-info .price{
  color:#0b1220;
}

.shop-info .discount{
  color:#dc2626;
}

.shop-info .question{
  margin-top:6px;
  color:#2563eb;
}

/* =========================
   Tijd-widgets
========================= */

.digitalTimeBox{
  display:grid;
  justify-items:center;
  gap:6px;
  padding:10px 12px;
  border:2px solid var(--line);
  border-radius:18px;
  background: var(--card);
  width: fit-content;
  margin: 0 auto 12px;
}

.digitalLabel{
  font-size:12px;
  color: var(--mut);
  font-weight:800;
  letter-spacing: .02em;
  text-transform: uppercase;
}

.digitalTime{
  font-size:32px;
  font-weight:900;
  line-height:1;
  padding:6px 14px;
  border-radius:14px;
  border:2px solid var(--line);
  background: #0b1220;
  color: #f8fafc;
  font-variant-numeric: tabular-nums;
}

.clockSetWrap{
  display:grid;
  justify-items:center;
  gap:10px;
  width: fit-content;
  margin: 0 auto;
  padding: 10px 12px;
  border: 2px solid var(--line);
  border-radius: 20px;
  background: var(--card);
}

.clockSetHint{
  font-size:12px;
  color: var(--mut);
  font-weight:800;
}

.clockSetSvg{
  touch-action: none;
  user-select: none;
}

.clockSetSvg .clkGrab{
  cursor: grab;
}

.clockSetSvg:active .clkGrab{
  cursor: grabbing;
}

/* --- responsive: op kleine schermen liever scrollen dan afkappen --- */
@media (max-height: 760px){
  .panelBody{ align-content:start; }
  .visualWrap{ max-height:none; }
}

@media (max-width: 760px){
  .choice{ flex: 1 1 140px; }
}

/* =========================================================
   Laptop-friendly polish (sub-FHD): meer ruimte, minder lucht
   Doel: 1366Ã—768, 1280Ã—720, en leerlingen die 125%-150% zoomen.
========================================================= */

@media (max-width: 1100px){
  .game{ grid-template-columns: 1fr 320px; }
}

@media (max-height: 720px){
  :root{ --pad: 12px; --hbtn: 44px; --hinput: 48px; }
  .top{ padding: 8px 10px; }
  .pill{ height:34px; }
  .iconBtn{ height:34px; }
  .panelHead{ padding: 10px 12px; }
  .answer{ padding: 10px 12px; gap: 8px; }
  .key{ height: 48px; border-radius: 14px; }
  .keypad{ padding: 12px; gap: 8px; }
}

@media (max-height: 660px){
  .headQ{ -webkit-line-clamp: 1; }
  .visualWrap{ padding: 8px; }
}


/* =====================================
   Calculator (rekentoestel)
===================================== */
.calcCard{ width: min(92vw, 420px); }
.calcLCD{
  background:#f8fbff;
  border:1px solid var(--line);
  border-radius:14px;
  padding:12px 14px;
  font-weight:900;
  font-size: 30px;
  text-align:right;
  letter-spacing: .5px;
  box-shadow: 0 10px 24px rgba(2,6,23,.10);
  user-select:none;
}
.calcGrid{
  margin-top:12px;
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:10px;
}
.calcKey{
  height:52px;
  border-radius:14px;
  border:1px solid var(--line);
  background:#fff;
  font-weight:900;
  cursor:pointer;
  box-shadow: 0 10px 24px rgba(2,6,23,.06);
}
.calcKey:active{ transform: translateY(1px); }
.calcKey.op{ background:#f8fafc; }
.calcKey.eq{
  background: rgba(37,99,235,.10);
  border-color: rgba(37,99,235,.35);
}
@media (max-height: 760px){
  .calcKey{ height:46px; }
  .calcLCD{ font-size: 26px; }
}


/* =========================
   HUD (toets/run progress)
========================= */
.hudLine{
  max-width: var(--maxw);
  margin: 0 auto;
  padding: 6px var(--pad) 10px;
}
.hudRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  font-size: 13px;
  font-weight: 900;
  color: var(--mut);
}
.hudBar{
  height: 8px;
  margin-top: 6px;
  background: #e5e7eb;
  border-radius: 999px;
  overflow: hidden;
}
.hudFill{
  height: 100%;
  width: 0%;
  background: var(--accent);
  border-radius: 999px;
  transition: width .2s ease;
}

/* =========================
   Keypad collapse
========================= */
.rpHead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.rpRight{
  display:flex;
  align-items:center;
  gap:10px;
}
.rpToggle{
  height: 30px;
  min-width: 34px;
  padding: 0 10px;
  border-radius: 12px;
  border: 1px solid var(--line);
  background: #fff;
  font-weight: 900;
  cursor: pointer;
}
.rightPanel.collapsed .keypad{ display:none; }
.rightPanel.collapsed{ padding-bottom: 10px; }

@media (max-height: 760px){
  .hudLine{ padding-top: 4px; padding-bottom: 8px; }
  .hudBar{ height: 7px; }
}

/* Altijd geen tips onder de vraag (hulpkaarten volstaan) */
#qSub{display:none !important;}

